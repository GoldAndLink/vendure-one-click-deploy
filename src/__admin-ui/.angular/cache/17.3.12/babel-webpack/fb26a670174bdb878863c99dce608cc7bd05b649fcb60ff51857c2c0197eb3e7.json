{"ast":null,"code":"import crel from 'crelt';\nimport { joinUp, lift, selectParentNode, setBlockType, wrapIn } from 'prosemirror-commands';\nimport { undo, redo } from 'prosemirror-history';\nimport { Plugin } from 'prosemirror-state';\nconst SVG = \"http://www.w3.org/2000/svg\";\nconst XLINK = \"http://www.w3.org/1999/xlink\";\nconst prefix$2 = \"ProseMirror-icon\";\nfunction hashPath(path) {\n  let hash = 0;\n  for (let i = 0; i < path.length; i++) hash = (hash << 5) - hash + path.charCodeAt(i) | 0;\n  return hash;\n}\nfunction getIcon(root, icon) {\n  let doc = (root.nodeType == 9 ? root : root.ownerDocument) || document;\n  let node = doc.createElement(\"div\");\n  node.className = prefix$2;\n  if (icon.path) {\n    let {\n      path,\n      width,\n      height\n    } = icon;\n    let name = \"pm-icon-\" + hashPath(path).toString(16);\n    if (!doc.getElementById(name)) buildSVG(root, name, icon);\n    let svg = node.appendChild(doc.createElementNS(SVG, \"svg\"));\n    svg.style.width = width / height + \"em\";\n    let use = svg.appendChild(doc.createElementNS(SVG, \"use\"));\n    use.setAttributeNS(XLINK, \"href\", /([^#]*)/.exec(doc.location.toString())[1] + \"#\" + name);\n  } else if (icon.dom) {\n    node.appendChild(icon.dom.cloneNode(true));\n  } else {\n    let {\n      text,\n      css\n    } = icon;\n    node.appendChild(doc.createElement(\"span\")).textContent = text || '';\n    if (css) node.firstChild.style.cssText = css;\n  }\n  return node;\n}\nfunction buildSVG(root, name, data) {\n  let [doc, top] = root.nodeType == 9 ? [root, root.body] : [root.ownerDocument || document, root];\n  let collection = doc.getElementById(prefix$2 + \"-collection\");\n  if (!collection) {\n    collection = doc.createElementNS(SVG, \"svg\");\n    collection.id = prefix$2 + \"-collection\";\n    collection.style.display = \"none\";\n    top.insertBefore(collection, top.firstChild);\n  }\n  let sym = doc.createElementNS(SVG, \"symbol\");\n  sym.id = name;\n  sym.setAttribute(\"viewBox\", \"0 0 \" + data.width + \" \" + data.height);\n  let path = sym.appendChild(doc.createElementNS(SVG, \"path\"));\n  path.setAttribute(\"d\", data.path);\n  collection.appendChild(sym);\n}\nconst prefix$1 = \"ProseMirror-menu\";\n/**\nAn icon or label that, when clicked, executes a command.\n*/\nclass MenuItem {\n  /**\n  Create a menu item.\n  */\n  constructor(\n  /**\n  The spec used to create this item.\n  */\n  spec) {\n    this.spec = spec;\n  }\n  /**\n  Renders the icon according to its [display\n  spec](https://prosemirror.net/docs/ref/#menu.MenuItemSpec.display), and adds an event handler which\n  executes the command when the representation is clicked.\n  */\n  render(view) {\n    let spec = this.spec;\n    let dom = spec.render ? spec.render(view) : spec.icon ? getIcon(view.root, spec.icon) : spec.label ? crel(\"div\", null, translate(view, spec.label)) : null;\n    if (!dom) throw new RangeError(\"MenuItem without icon or label property\");\n    if (spec.title) {\n      const title = typeof spec.title === \"function\" ? spec.title(view.state) : spec.title;\n      dom.setAttribute(\"title\", translate(view, title));\n    }\n    if (spec.class) dom.classList.add(spec.class);\n    if (spec.css) dom.style.cssText += spec.css;\n    dom.addEventListener(\"mousedown\", e => {\n      e.preventDefault();\n      if (!dom.classList.contains(prefix$1 + \"-disabled\")) spec.run(view.state, view.dispatch, view, e);\n    });\n    function update(state) {\n      if (spec.select) {\n        let selected = spec.select(state);\n        dom.style.display = selected ? \"\" : \"none\";\n        if (!selected) return false;\n      }\n      let enabled = true;\n      if (spec.enable) {\n        enabled = spec.enable(state) || false;\n        setClass(dom, prefix$1 + \"-disabled\", !enabled);\n      }\n      if (spec.active) {\n        let active = enabled && spec.active(state) || false;\n        setClass(dom, prefix$1 + \"-active\", active);\n      }\n      return true;\n    }\n    return {\n      dom,\n      update\n    };\n  }\n}\nfunction translate(view, text) {\n  return view._props.translate ? view._props.translate(text) : text;\n}\nlet lastMenuEvent = {\n  time: 0,\n  node: null\n};\nfunction markMenuEvent(e) {\n  lastMenuEvent.time = Date.now();\n  lastMenuEvent.node = e.target;\n}\nfunction isMenuEvent(wrapper) {\n  return Date.now() - 100 < lastMenuEvent.time && lastMenuEvent.node && wrapper.contains(lastMenuEvent.node);\n}\n/**\nA drop-down menu, displayed as a label with a downwards-pointing\ntriangle to the right of it.\n*/\nclass Dropdown {\n  /**\n  Create a dropdown wrapping the elements.\n  */\n  constructor(content,\n  /**\n  @internal\n  */\n  options = {}) {\n    this.options = options;\n    this.options = options || {};\n    this.content = Array.isArray(content) ? content : [content];\n  }\n  /**\n  Render the dropdown menu and sub-items.\n  */\n  render(view) {\n    let content = renderDropdownItems(this.content, view);\n    let win = view.dom.ownerDocument.defaultView || window;\n    let label = crel(\"div\", {\n      class: prefix$1 + \"-dropdown \" + (this.options.class || \"\"),\n      style: this.options.css\n    }, translate(view, this.options.label || \"\"));\n    if (this.options.title) label.setAttribute(\"title\", translate(view, this.options.title));\n    let wrap = crel(\"div\", {\n      class: prefix$1 + \"-dropdown-wrap\"\n    }, label);\n    let open = null;\n    let listeningOnClose = null;\n    let close = () => {\n      if (open && open.close()) {\n        open = null;\n        win.removeEventListener(\"mousedown\", listeningOnClose);\n      }\n    };\n    label.addEventListener(\"mousedown\", e => {\n      e.preventDefault();\n      markMenuEvent(e);\n      if (open) {\n        close();\n      } else {\n        open = this.expand(wrap, content.dom);\n        win.addEventListener(\"mousedown\", listeningOnClose = () => {\n          if (!isMenuEvent(wrap)) close();\n        });\n      }\n    });\n    function update(state) {\n      let inner = content.update(state);\n      wrap.style.display = inner ? \"\" : \"none\";\n      return inner;\n    }\n    return {\n      dom: wrap,\n      update\n    };\n  }\n  /**\n  @internal\n  */\n  expand(dom, items) {\n    let menuDOM = crel(\"div\", {\n      class: prefix$1 + \"-dropdown-menu \" + (this.options.class || \"\")\n    }, items);\n    let done = false;\n    function close() {\n      if (done) return false;\n      done = true;\n      dom.removeChild(menuDOM);\n      return true;\n    }\n    dom.appendChild(menuDOM);\n    return {\n      close,\n      node: menuDOM\n    };\n  }\n}\nfunction renderDropdownItems(items, view) {\n  let rendered = [],\n    updates = [];\n  for (let i = 0; i < items.length; i++) {\n    let {\n      dom,\n      update\n    } = items[i].render(view);\n    rendered.push(crel(\"div\", {\n      class: prefix$1 + \"-dropdown-item\"\n    }, dom));\n    updates.push(update);\n  }\n  return {\n    dom: rendered,\n    update: combineUpdates(updates, rendered)\n  };\n}\nfunction combineUpdates(updates, nodes) {\n  return state => {\n    let something = false;\n    for (let i = 0; i < updates.length; i++) {\n      let up = updates[i](state);\n      nodes[i].style.display = up ? \"\" : \"none\";\n      if (up) something = true;\n    }\n    return something;\n  };\n}\n/**\nRepresents a submenu wrapping a group of elements that start\nhidden and expand to the right when hovered over or tapped.\n*/\nclass DropdownSubmenu {\n  /**\n  Creates a submenu for the given group of menu elements. The\n  following options are recognized:\n  */\n  constructor(content,\n  /**\n  @internal\n  */\n  options = {}) {\n    this.options = options;\n    this.content = Array.isArray(content) ? content : [content];\n  }\n  /**\n  Renders the submenu.\n  */\n  render(view) {\n    let items = renderDropdownItems(this.content, view);\n    let win = view.dom.ownerDocument.defaultView || window;\n    let label = crel(\"div\", {\n      class: prefix$1 + \"-submenu-label\"\n    }, translate(view, this.options.label || \"\"));\n    let wrap = crel(\"div\", {\n      class: prefix$1 + \"-submenu-wrap\"\n    }, label, crel(\"div\", {\n      class: prefix$1 + \"-submenu\"\n    }, items.dom));\n    let listeningOnClose = null;\n    label.addEventListener(\"mousedown\", e => {\n      e.preventDefault();\n      markMenuEvent(e);\n      setClass(wrap, prefix$1 + \"-submenu-wrap-active\", false);\n      if (!listeningOnClose) win.addEventListener(\"mousedown\", listeningOnClose = () => {\n        if (!isMenuEvent(wrap)) {\n          wrap.classList.remove(prefix$1 + \"-submenu-wrap-active\");\n          win.removeEventListener(\"mousedown\", listeningOnClose);\n          listeningOnClose = null;\n        }\n      });\n    });\n    function update(state) {\n      let inner = items.update(state);\n      wrap.style.display = inner ? \"\" : \"none\";\n      return inner;\n    }\n    return {\n      dom: wrap,\n      update\n    };\n  }\n}\n/**\nRender the given, possibly nested, array of menu elements into a\ndocument fragment, placing separators between them (and ensuring no\nsuperfluous separators appear when some of the groups turn out to\nbe empty).\n*/\nfunction renderGrouped(view, content) {\n  let result = document.createDocumentFragment();\n  let updates = [],\n    separators = [];\n  for (let i = 0; i < content.length; i++) {\n    let items = content[i],\n      localUpdates = [],\n      localNodes = [];\n    for (let j = 0; j < items.length; j++) {\n      let {\n        dom,\n        update\n      } = items[j].render(view);\n      let span = crel(\"span\", {\n        class: prefix$1 + \"item\"\n      }, dom);\n      result.appendChild(span);\n      localNodes.push(span);\n      localUpdates.push(update);\n    }\n    if (localUpdates.length) {\n      updates.push(combineUpdates(localUpdates, localNodes));\n      if (i < content.length - 1) separators.push(result.appendChild(separator()));\n    }\n  }\n  function update(state) {\n    let something = false,\n      needSep = false;\n    for (let i = 0; i < updates.length; i++) {\n      let hasContent = updates[i](state);\n      if (i) separators[i - 1].style.display = needSep && hasContent ? \"\" : \"none\";\n      needSep = hasContent;\n      if (hasContent) something = true;\n    }\n    return something;\n  }\n  return {\n    dom: result,\n    update\n  };\n}\nfunction separator() {\n  return crel(\"span\", {\n    class: prefix$1 + \"separator\"\n  });\n}\n/**\nA set of basic editor-related icons. Contains the properties\n`join`, `lift`, `selectParentNode`, `undo`, `redo`, `strong`, `em`,\n`code`, `link`, `bulletList`, `orderedList`, and `blockquote`, each\nholding an object that can be used as the `icon` option to\n`MenuItem`.\n*/\nconst icons = {\n  join: {\n    width: 800,\n    height: 900,\n    path: \"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z\"\n  },\n  lift: {\n    width: 1024,\n    height: 1024,\n    path: \"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z\"\n  },\n  selectParentNode: {\n    text: \"\\u2b1a\",\n    css: \"font-weight: bold\"\n  },\n  undo: {\n    width: 1024,\n    height: 1024,\n    path: \"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z\"\n  },\n  redo: {\n    width: 1024,\n    height: 1024,\n    path: \"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z\"\n  },\n  strong: {\n    width: 805,\n    height: 1024,\n    path: \"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z\"\n  },\n  em: {\n    width: 585,\n    height: 1024,\n    path: \"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z\"\n  },\n  code: {\n    width: 896,\n    height: 1024,\n    path: \"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z\"\n  },\n  link: {\n    width: 951,\n    height: 1024,\n    path: \"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z\"\n  },\n  bulletList: {\n    width: 768,\n    height: 896,\n    path: \"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z\"\n  },\n  orderedList: {\n    width: 768,\n    height: 896,\n    path: \"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z\"\n  },\n  blockquote: {\n    width: 640,\n    height: 896,\n    path: \"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z\"\n  }\n};\n/**\nMenu item for the `joinUp` command.\n*/\nconst joinUpItem = new MenuItem({\n  title: \"Join with above block\",\n  run: joinUp,\n  select: state => joinUp(state),\n  icon: icons.join\n});\n/**\nMenu item for the `lift` command.\n*/\nconst liftItem = new MenuItem({\n  title: \"Lift out of enclosing block\",\n  run: lift,\n  select: state => lift(state),\n  icon: icons.lift\n});\n/**\nMenu item for the `selectParentNode` command.\n*/\nconst selectParentNodeItem = new MenuItem({\n  title: \"Select parent node\",\n  run: selectParentNode,\n  select: state => selectParentNode(state),\n  icon: icons.selectParentNode\n});\n/**\nMenu item for the `undo` command.\n*/\nlet undoItem = new MenuItem({\n  title: \"Undo last change\",\n  run: undo,\n  enable: state => undo(state),\n  icon: icons.undo\n});\n/**\nMenu item for the `redo` command.\n*/\nlet redoItem = new MenuItem({\n  title: \"Redo last undone change\",\n  run: redo,\n  enable: state => redo(state),\n  icon: icons.redo\n});\n/**\nBuild a menu item for wrapping the selection in a given node type.\nAdds `run` and `select` properties to the ones present in\n`options`. `options.attrs` may be an object that provides\nattributes for the wrapping node.\n*/\nfunction wrapItem(nodeType, options) {\n  let passedOptions = {\n    run(state, dispatch) {\n      return wrapIn(nodeType, options.attrs)(state, dispatch);\n    },\n    select(state) {\n      return wrapIn(nodeType, options.attrs)(state);\n    }\n  };\n  for (let prop in options) passedOptions[prop] = options[prop];\n  return new MenuItem(passedOptions);\n}\n/**\nBuild a menu item for changing the type of the textblock around the\nselection to the given type. Provides `run`, `active`, and `select`\nproperties. Others must be given in `options`. `options.attrs` may\nbe an object to provide the attributes for the textblock node.\n*/\nfunction blockTypeItem(nodeType, options) {\n  let command = setBlockType(nodeType, options.attrs);\n  let passedOptions = {\n    run: command,\n    enable(state) {\n      return command(state);\n    },\n    active(state) {\n      let {\n        $from,\n        to,\n        node\n      } = state.selection;\n      if (node) return node.hasMarkup(nodeType, options.attrs);\n      return to <= $from.end() && $from.parent.hasMarkup(nodeType, options.attrs);\n    }\n  };\n  for (let prop in options) passedOptions[prop] = options[prop];\n  return new MenuItem(passedOptions);\n}\n// Work around classList.toggle being broken in IE11\nfunction setClass(dom, cls, on) {\n  if (on) dom.classList.add(cls);else dom.classList.remove(cls);\n}\nconst prefix = \"ProseMirror-menubar\";\nfunction isIOS() {\n  if (typeof navigator == \"undefined\") return false;\n  let agent = navigator.userAgent;\n  return !/Edge\\/\\d/.test(agent) && /AppleWebKit/.test(agent) && /Mobile\\/\\w+/.test(agent);\n}\n/**\nA plugin that will place a menu bar above the editor. Note that\nthis involves wrapping the editor in an additional `<div>`.\n*/\nfunction menuBar(options) {\n  return new Plugin({\n    view(editorView) {\n      return new MenuBarView(editorView, options);\n    }\n  });\n}\nclass MenuBarView {\n  constructor(editorView, options) {\n    this.editorView = editorView;\n    this.options = options;\n    this.spacer = null;\n    this.maxHeight = 0;\n    this.widthForMaxHeight = 0;\n    this.floating = false;\n    this.scrollHandler = null;\n    this.wrapper = crel(\"div\", {\n      class: prefix + \"-wrapper\"\n    });\n    this.menu = this.wrapper.appendChild(crel(\"div\", {\n      class: prefix\n    }));\n    this.menu.className = prefix;\n    if (editorView.dom.parentNode) editorView.dom.parentNode.replaceChild(this.wrapper, editorView.dom);\n    this.wrapper.appendChild(editorView.dom);\n    let {\n      dom,\n      update\n    } = renderGrouped(this.editorView, this.options.content);\n    this.contentUpdate = update;\n    this.menu.appendChild(dom);\n    this.update();\n    if (options.floating && !isIOS()) {\n      this.updateFloat();\n      let potentialScrollers = getAllWrapping(this.wrapper);\n      this.scrollHandler = e => {\n        let root = this.editorView.root;\n        if (!(root.body || root).contains(this.wrapper)) potentialScrollers.forEach(el => el.removeEventListener(\"scroll\", this.scrollHandler));else this.updateFloat(e.target.getBoundingClientRect ? e.target : undefined);\n      };\n      potentialScrollers.forEach(el => el.addEventListener('scroll', this.scrollHandler));\n    }\n  }\n  update() {\n    this.contentUpdate(this.editorView.state);\n    if (this.floating) {\n      this.updateScrollCursor();\n    } else {\n      if (this.menu.offsetWidth != this.widthForMaxHeight) {\n        this.widthForMaxHeight = this.menu.offsetWidth;\n        this.maxHeight = 0;\n      }\n      if (this.menu.offsetHeight > this.maxHeight) {\n        this.maxHeight = this.menu.offsetHeight;\n        this.menu.style.minHeight = this.maxHeight + \"px\";\n      }\n    }\n  }\n  updateScrollCursor() {\n    let selection = this.editorView.root.getSelection();\n    if (!selection.focusNode) return;\n    let rects = selection.getRangeAt(0).getClientRects();\n    let selRect = rects[selectionIsInverted(selection) ? 0 : rects.length - 1];\n    if (!selRect) return;\n    let menuRect = this.menu.getBoundingClientRect();\n    if (selRect.top < menuRect.bottom && selRect.bottom > menuRect.top) {\n      let scrollable = findWrappingScrollable(this.wrapper);\n      if (scrollable) scrollable.scrollTop -= menuRect.bottom - selRect.top;\n    }\n  }\n  updateFloat(scrollAncestor) {\n    let parent = this.wrapper,\n      editorRect = parent.getBoundingClientRect(),\n      top = scrollAncestor ? Math.max(0, scrollAncestor.getBoundingClientRect().top) : 0;\n    if (this.floating) {\n      if (editorRect.top >= top || editorRect.bottom < this.menu.offsetHeight + 10) {\n        this.floating = false;\n        this.menu.style.position = this.menu.style.left = this.menu.style.top = this.menu.style.width = \"\";\n        this.menu.style.display = \"\";\n        this.spacer.parentNode.removeChild(this.spacer);\n        this.spacer = null;\n      } else {\n        let border = (parent.offsetWidth - parent.clientWidth) / 2;\n        this.menu.style.left = editorRect.left + border + \"px\";\n        this.menu.style.display = editorRect.top > (this.editorView.dom.ownerDocument.defaultView || window).innerHeight ? \"none\" : \"\";\n        if (scrollAncestor) this.menu.style.top = top + \"px\";\n      }\n    } else {\n      if (editorRect.top < top && editorRect.bottom >= this.menu.offsetHeight + 10) {\n        this.floating = true;\n        let menuRect = this.menu.getBoundingClientRect();\n        this.menu.style.left = menuRect.left + \"px\";\n        this.menu.style.width = menuRect.width + \"px\";\n        if (scrollAncestor) this.menu.style.top = top + \"px\";\n        this.menu.style.position = \"fixed\";\n        this.spacer = crel(\"div\", {\n          class: prefix + \"-spacer\",\n          style: `height: ${menuRect.height}px`\n        });\n        parent.insertBefore(this.spacer, this.menu);\n      }\n    }\n  }\n  destroy() {\n    if (this.wrapper.parentNode) this.wrapper.parentNode.replaceChild(this.editorView.dom, this.wrapper);\n  }\n}\n// Not precise, but close enough\nfunction selectionIsInverted(selection) {\n  if (selection.anchorNode == selection.focusNode) return selection.anchorOffset > selection.focusOffset;\n  return selection.anchorNode.compareDocumentPosition(selection.focusNode) == Node.DOCUMENT_POSITION_FOLLOWING;\n}\nfunction findWrappingScrollable(node) {\n  for (let cur = node.parentNode; cur; cur = cur.parentNode) if (cur.scrollHeight > cur.clientHeight) return cur;\n}\nfunction getAllWrapping(node) {\n  let res = [node.ownerDocument.defaultView || window];\n  for (let cur = node.parentNode; cur; cur = cur.parentNode) res.push(cur);\n  return res;\n}\nexport { Dropdown, DropdownSubmenu, MenuItem, blockTypeItem, icons, joinUpItem, liftItem, menuBar, redoItem, renderGrouped, selectParentNodeItem, undoItem, wrapItem };","map":{"version":3,"names":["crel","joinUp","lift","selectParentNode","setBlockType","wrapIn","undo","redo","Plugin","SVG","XLINK","prefix$2","hashPath","path","hash","i","length","charCodeAt","getIcon","root","icon","doc","nodeType","ownerDocument","document","node","createElement","className","width","height","name","toString","getElementById","buildSVG","svg","appendChild","createElementNS","style","use","setAttributeNS","exec","location","dom","cloneNode","text","css","textContent","firstChild","cssText","data","top","body","collection","id","display","insertBefore","sym","setAttribute","prefix$1","MenuItem","constructor","spec","render","view","label","translate","RangeError","title","state","class","classList","add","addEventListener","e","preventDefault","contains","run","dispatch","update","select","selected","enabled","enable","setClass","active","_props","lastMenuEvent","time","markMenuEvent","Date","now","target","isMenuEvent","wrapper","Dropdown","content","options","Array","isArray","renderDropdownItems","win","defaultView","window","wrap","open","listeningOnClose","close","removeEventListener","expand","inner","items","menuDOM","done","removeChild","rendered","updates","push","combineUpdates","nodes","something","up","DropdownSubmenu","remove","renderGrouped","result","createDocumentFragment","separators","localUpdates","localNodes","j","span","separator","needSep","hasContent","icons","join","strong","em","code","link","bulletList","orderedList","blockquote","joinUpItem","liftItem","selectParentNodeItem","undoItem","redoItem","wrapItem","passedOptions","attrs","prop","blockTypeItem","command","$from","to","selection","hasMarkup","end","parent","cls","on","prefix","isIOS","navigator","agent","userAgent","test","menuBar","editorView","MenuBarView","spacer","maxHeight","widthForMaxHeight","floating","scrollHandler","menu","parentNode","replaceChild","contentUpdate","updateFloat","potentialScrollers","getAllWrapping","forEach","el","getBoundingClientRect","undefined","updateScrollCursor","offsetWidth","offsetHeight","minHeight","getSelection","focusNode","rects","getRangeAt","getClientRects","selRect","selectionIsInverted","menuRect","bottom","scrollable","findWrappingScrollable","scrollTop","scrollAncestor","editorRect","Math","max","position","left","border","clientWidth","innerHeight","destroy","anchorNode","anchorOffset","focusOffset","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","cur","scrollHeight","clientHeight","res"],"sources":["/Users/peluche/Documents/NoursStuffs/CerisePeyi/dev/2k24/last/vendure-one-click-deploy/node_modules/prosemirror-menu/dist/index.js"],"sourcesContent":["import crel from 'crelt';\nimport { joinUp, lift, selectParentNode, setBlockType, wrapIn } from 'prosemirror-commands';\nimport { undo, redo } from 'prosemirror-history';\nimport { Plugin } from 'prosemirror-state';\n\nconst SVG = \"http://www.w3.org/2000/svg\";\nconst XLINK = \"http://www.w3.org/1999/xlink\";\nconst prefix$2 = \"ProseMirror-icon\";\nfunction hashPath(path) {\n    let hash = 0;\n    for (let i = 0; i < path.length; i++)\n        hash = (((hash << 5) - hash) + path.charCodeAt(i)) | 0;\n    return hash;\n}\nfunction getIcon(root, icon) {\n    let doc = (root.nodeType == 9 ? root : root.ownerDocument) || document;\n    let node = doc.createElement(\"div\");\n    node.className = prefix$2;\n    if (icon.path) {\n        let { path, width, height } = icon;\n        let name = \"pm-icon-\" + hashPath(path).toString(16);\n        if (!doc.getElementById(name))\n            buildSVG(root, name, icon);\n        let svg = node.appendChild(doc.createElementNS(SVG, \"svg\"));\n        svg.style.width = (width / height) + \"em\";\n        let use = svg.appendChild(doc.createElementNS(SVG, \"use\"));\n        use.setAttributeNS(XLINK, \"href\", /([^#]*)/.exec(doc.location.toString())[1] + \"#\" + name);\n    }\n    else if (icon.dom) {\n        node.appendChild(icon.dom.cloneNode(true));\n    }\n    else {\n        let { text, css } = icon;\n        node.appendChild(doc.createElement(\"span\")).textContent = text || '';\n        if (css)\n            node.firstChild.style.cssText = css;\n    }\n    return node;\n}\nfunction buildSVG(root, name, data) {\n    let [doc, top] = root.nodeType == 9 ? [root, root.body] : [root.ownerDocument || document, root];\n    let collection = doc.getElementById(prefix$2 + \"-collection\");\n    if (!collection) {\n        collection = doc.createElementNS(SVG, \"svg\");\n        collection.id = prefix$2 + \"-collection\";\n        collection.style.display = \"none\";\n        top.insertBefore(collection, top.firstChild);\n    }\n    let sym = doc.createElementNS(SVG, \"symbol\");\n    sym.id = name;\n    sym.setAttribute(\"viewBox\", \"0 0 \" + data.width + \" \" + data.height);\n    let path = sym.appendChild(doc.createElementNS(SVG, \"path\"));\n    path.setAttribute(\"d\", data.path);\n    collection.appendChild(sym);\n}\n\nconst prefix$1 = \"ProseMirror-menu\";\n/**\nAn icon or label that, when clicked, executes a command.\n*/\nclass MenuItem {\n    /**\n    Create a menu item.\n    */\n    constructor(\n    /**\n    The spec used to create this item.\n    */\n    spec) {\n        this.spec = spec;\n    }\n    /**\n    Renders the icon according to its [display\n    spec](https://prosemirror.net/docs/ref/#menu.MenuItemSpec.display), and adds an event handler which\n    executes the command when the representation is clicked.\n    */\n    render(view) {\n        let spec = this.spec;\n        let dom = spec.render ? spec.render(view)\n            : spec.icon ? getIcon(view.root, spec.icon)\n                : spec.label ? crel(\"div\", null, translate(view, spec.label))\n                    : null;\n        if (!dom)\n            throw new RangeError(\"MenuItem without icon or label property\");\n        if (spec.title) {\n            const title = (typeof spec.title === \"function\" ? spec.title(view.state) : spec.title);\n            dom.setAttribute(\"title\", translate(view, title));\n        }\n        if (spec.class)\n            dom.classList.add(spec.class);\n        if (spec.css)\n            dom.style.cssText += spec.css;\n        dom.addEventListener(\"mousedown\", e => {\n            e.preventDefault();\n            if (!dom.classList.contains(prefix$1 + \"-disabled\"))\n                spec.run(view.state, view.dispatch, view, e);\n        });\n        function update(state) {\n            if (spec.select) {\n                let selected = spec.select(state);\n                dom.style.display = selected ? \"\" : \"none\";\n                if (!selected)\n                    return false;\n            }\n            let enabled = true;\n            if (spec.enable) {\n                enabled = spec.enable(state) || false;\n                setClass(dom, prefix$1 + \"-disabled\", !enabled);\n            }\n            if (spec.active) {\n                let active = enabled && spec.active(state) || false;\n                setClass(dom, prefix$1 + \"-active\", active);\n            }\n            return true;\n        }\n        return { dom, update };\n    }\n}\nfunction translate(view, text) {\n    return view._props.translate ? view._props.translate(text) : text;\n}\nlet lastMenuEvent = { time: 0, node: null };\nfunction markMenuEvent(e) {\n    lastMenuEvent.time = Date.now();\n    lastMenuEvent.node = e.target;\n}\nfunction isMenuEvent(wrapper) {\n    return Date.now() - 100 < lastMenuEvent.time &&\n        lastMenuEvent.node && wrapper.contains(lastMenuEvent.node);\n}\n/**\nA drop-down menu, displayed as a label with a downwards-pointing\ntriangle to the right of it.\n*/\nclass Dropdown {\n    /**\n    Create a dropdown wrapping the elements.\n    */\n    constructor(content, \n    /**\n    @internal\n    */\n    options = {}) {\n        this.options = options;\n        this.options = options || {};\n        this.content = Array.isArray(content) ? content : [content];\n    }\n    /**\n    Render the dropdown menu and sub-items.\n    */\n    render(view) {\n        let content = renderDropdownItems(this.content, view);\n        let win = view.dom.ownerDocument.defaultView || window;\n        let label = crel(\"div\", { class: prefix$1 + \"-dropdown \" + (this.options.class || \"\"),\n            style: this.options.css }, translate(view, this.options.label || \"\"));\n        if (this.options.title)\n            label.setAttribute(\"title\", translate(view, this.options.title));\n        let wrap = crel(\"div\", { class: prefix$1 + \"-dropdown-wrap\" }, label);\n        let open = null;\n        let listeningOnClose = null;\n        let close = () => {\n            if (open && open.close()) {\n                open = null;\n                win.removeEventListener(\"mousedown\", listeningOnClose);\n            }\n        };\n        label.addEventListener(\"mousedown\", e => {\n            e.preventDefault();\n            markMenuEvent(e);\n            if (open) {\n                close();\n            }\n            else {\n                open = this.expand(wrap, content.dom);\n                win.addEventListener(\"mousedown\", listeningOnClose = () => {\n                    if (!isMenuEvent(wrap))\n                        close();\n                });\n            }\n        });\n        function update(state) {\n            let inner = content.update(state);\n            wrap.style.display = inner ? \"\" : \"none\";\n            return inner;\n        }\n        return { dom: wrap, update };\n    }\n    /**\n    @internal\n    */\n    expand(dom, items) {\n        let menuDOM = crel(\"div\", { class: prefix$1 + \"-dropdown-menu \" + (this.options.class || \"\") }, items);\n        let done = false;\n        function close() {\n            if (done)\n                return false;\n            done = true;\n            dom.removeChild(menuDOM);\n            return true;\n        }\n        dom.appendChild(menuDOM);\n        return { close, node: menuDOM };\n    }\n}\nfunction renderDropdownItems(items, view) {\n    let rendered = [], updates = [];\n    for (let i = 0; i < items.length; i++) {\n        let { dom, update } = items[i].render(view);\n        rendered.push(crel(\"div\", { class: prefix$1 + \"-dropdown-item\" }, dom));\n        updates.push(update);\n    }\n    return { dom: rendered, update: combineUpdates(updates, rendered) };\n}\nfunction combineUpdates(updates, nodes) {\n    return (state) => {\n        let something = false;\n        for (let i = 0; i < updates.length; i++) {\n            let up = updates[i](state);\n            nodes[i].style.display = up ? \"\" : \"none\";\n            if (up)\n                something = true;\n        }\n        return something;\n    };\n}\n/**\nRepresents a submenu wrapping a group of elements that start\nhidden and expand to the right when hovered over or tapped.\n*/\nclass DropdownSubmenu {\n    /**\n    Creates a submenu for the given group of menu elements. The\n    following options are recognized:\n    */\n    constructor(content, \n    /**\n    @internal\n    */\n    options = {}) {\n        this.options = options;\n        this.content = Array.isArray(content) ? content : [content];\n    }\n    /**\n    Renders the submenu.\n    */\n    render(view) {\n        let items = renderDropdownItems(this.content, view);\n        let win = view.dom.ownerDocument.defaultView || window;\n        let label = crel(\"div\", { class: prefix$1 + \"-submenu-label\" }, translate(view, this.options.label || \"\"));\n        let wrap = crel(\"div\", { class: prefix$1 + \"-submenu-wrap\" }, label, crel(\"div\", { class: prefix$1 + \"-submenu\" }, items.dom));\n        let listeningOnClose = null;\n        label.addEventListener(\"mousedown\", e => {\n            e.preventDefault();\n            markMenuEvent(e);\n            setClass(wrap, prefix$1 + \"-submenu-wrap-active\", false);\n            if (!listeningOnClose)\n                win.addEventListener(\"mousedown\", listeningOnClose = () => {\n                    if (!isMenuEvent(wrap)) {\n                        wrap.classList.remove(prefix$1 + \"-submenu-wrap-active\");\n                        win.removeEventListener(\"mousedown\", listeningOnClose);\n                        listeningOnClose = null;\n                    }\n                });\n        });\n        function update(state) {\n            let inner = items.update(state);\n            wrap.style.display = inner ? \"\" : \"none\";\n            return inner;\n        }\n        return { dom: wrap, update };\n    }\n}\n/**\nRender the given, possibly nested, array of menu elements into a\ndocument fragment, placing separators between them (and ensuring no\nsuperfluous separators appear when some of the groups turn out to\nbe empty).\n*/\nfunction renderGrouped(view, content) {\n    let result = document.createDocumentFragment();\n    let updates = [], separators = [];\n    for (let i = 0; i < content.length; i++) {\n        let items = content[i], localUpdates = [], localNodes = [];\n        for (let j = 0; j < items.length; j++) {\n            let { dom, update } = items[j].render(view);\n            let span = crel(\"span\", { class: prefix$1 + \"item\" }, dom);\n            result.appendChild(span);\n            localNodes.push(span);\n            localUpdates.push(update);\n        }\n        if (localUpdates.length) {\n            updates.push(combineUpdates(localUpdates, localNodes));\n            if (i < content.length - 1)\n                separators.push(result.appendChild(separator()));\n        }\n    }\n    function update(state) {\n        let something = false, needSep = false;\n        for (let i = 0; i < updates.length; i++) {\n            let hasContent = updates[i](state);\n            if (i)\n                separators[i - 1].style.display = needSep && hasContent ? \"\" : \"none\";\n            needSep = hasContent;\n            if (hasContent)\n                something = true;\n        }\n        return something;\n    }\n    return { dom: result, update };\n}\nfunction separator() {\n    return crel(\"span\", { class: prefix$1 + \"separator\" });\n}\n/**\nA set of basic editor-related icons. Contains the properties\n`join`, `lift`, `selectParentNode`, `undo`, `redo`, `strong`, `em`,\n`code`, `link`, `bulletList`, `orderedList`, and `blockquote`, each\nholding an object that can be used as the `icon` option to\n`MenuItem`.\n*/\nconst icons = {\n    join: {\n        width: 800, height: 900,\n        path: \"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z\"\n    },\n    lift: {\n        width: 1024, height: 1024,\n        path: \"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z\"\n    },\n    selectParentNode: { text: \"\\u2b1a\", css: \"font-weight: bold\" },\n    undo: {\n        width: 1024, height: 1024,\n        path: \"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z\"\n    },\n    redo: {\n        width: 1024, height: 1024,\n        path: \"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z\"\n    },\n    strong: {\n        width: 805, height: 1024,\n        path: \"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z\"\n    },\n    em: {\n        width: 585, height: 1024,\n        path: \"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z\"\n    },\n    code: {\n        width: 896, height: 1024,\n        path: \"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z\"\n    },\n    link: {\n        width: 951, height: 1024,\n        path: \"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z\"\n    },\n    bulletList: {\n        width: 768, height: 896,\n        path: \"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z\"\n    },\n    orderedList: {\n        width: 768, height: 896,\n        path: \"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z\"\n    },\n    blockquote: {\n        width: 640, height: 896,\n        path: \"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z\"\n    }\n};\n/**\nMenu item for the `joinUp` command.\n*/\nconst joinUpItem = new MenuItem({\n    title: \"Join with above block\",\n    run: joinUp,\n    select: state => joinUp(state),\n    icon: icons.join\n});\n/**\nMenu item for the `lift` command.\n*/\nconst liftItem = new MenuItem({\n    title: \"Lift out of enclosing block\",\n    run: lift,\n    select: state => lift(state),\n    icon: icons.lift\n});\n/**\nMenu item for the `selectParentNode` command.\n*/\nconst selectParentNodeItem = new MenuItem({\n    title: \"Select parent node\",\n    run: selectParentNode,\n    select: state => selectParentNode(state),\n    icon: icons.selectParentNode\n});\n/**\nMenu item for the `undo` command.\n*/\nlet undoItem = new MenuItem({\n    title: \"Undo last change\",\n    run: undo,\n    enable: state => undo(state),\n    icon: icons.undo\n});\n/**\nMenu item for the `redo` command.\n*/\nlet redoItem = new MenuItem({\n    title: \"Redo last undone change\",\n    run: redo,\n    enable: state => redo(state),\n    icon: icons.redo\n});\n/**\nBuild a menu item for wrapping the selection in a given node type.\nAdds `run` and `select` properties to the ones present in\n`options`. `options.attrs` may be an object that provides\nattributes for the wrapping node.\n*/\nfunction wrapItem(nodeType, options) {\n    let passedOptions = {\n        run(state, dispatch) {\n            return wrapIn(nodeType, options.attrs)(state, dispatch);\n        },\n        select(state) {\n            return wrapIn(nodeType, options.attrs)(state);\n        }\n    };\n    for (let prop in options)\n        passedOptions[prop] = options[prop];\n    return new MenuItem(passedOptions);\n}\n/**\nBuild a menu item for changing the type of the textblock around the\nselection to the given type. Provides `run`, `active`, and `select`\nproperties. Others must be given in `options`. `options.attrs` may\nbe an object to provide the attributes for the textblock node.\n*/\nfunction blockTypeItem(nodeType, options) {\n    let command = setBlockType(nodeType, options.attrs);\n    let passedOptions = {\n        run: command,\n        enable(state) { return command(state); },\n        active(state) {\n            let { $from, to, node } = state.selection;\n            if (node)\n                return node.hasMarkup(nodeType, options.attrs);\n            return to <= $from.end() && $from.parent.hasMarkup(nodeType, options.attrs);\n        }\n    };\n    for (let prop in options)\n        passedOptions[prop] = options[prop];\n    return new MenuItem(passedOptions);\n}\n// Work around classList.toggle being broken in IE11\nfunction setClass(dom, cls, on) {\n    if (on)\n        dom.classList.add(cls);\n    else\n        dom.classList.remove(cls);\n}\n\nconst prefix = \"ProseMirror-menubar\";\nfunction isIOS() {\n    if (typeof navigator == \"undefined\")\n        return false;\n    let agent = navigator.userAgent;\n    return !/Edge\\/\\d/.test(agent) && /AppleWebKit/.test(agent) && /Mobile\\/\\w+/.test(agent);\n}\n/**\nA plugin that will place a menu bar above the editor. Note that\nthis involves wrapping the editor in an additional `<div>`.\n*/\nfunction menuBar(options) {\n    return new Plugin({\n        view(editorView) { return new MenuBarView(editorView, options); }\n    });\n}\nclass MenuBarView {\n    constructor(editorView, options) {\n        this.editorView = editorView;\n        this.options = options;\n        this.spacer = null;\n        this.maxHeight = 0;\n        this.widthForMaxHeight = 0;\n        this.floating = false;\n        this.scrollHandler = null;\n        this.wrapper = crel(\"div\", { class: prefix + \"-wrapper\" });\n        this.menu = this.wrapper.appendChild(crel(\"div\", { class: prefix }));\n        this.menu.className = prefix;\n        if (editorView.dom.parentNode)\n            editorView.dom.parentNode.replaceChild(this.wrapper, editorView.dom);\n        this.wrapper.appendChild(editorView.dom);\n        let { dom, update } = renderGrouped(this.editorView, this.options.content);\n        this.contentUpdate = update;\n        this.menu.appendChild(dom);\n        this.update();\n        if (options.floating && !isIOS()) {\n            this.updateFloat();\n            let potentialScrollers = getAllWrapping(this.wrapper);\n            this.scrollHandler = (e) => {\n                let root = this.editorView.root;\n                if (!(root.body || root).contains(this.wrapper))\n                    potentialScrollers.forEach(el => el.removeEventListener(\"scroll\", this.scrollHandler));\n                else\n                    this.updateFloat(e.target.getBoundingClientRect ? e.target : undefined);\n            };\n            potentialScrollers.forEach(el => el.addEventListener('scroll', this.scrollHandler));\n        }\n    }\n    update() {\n        this.contentUpdate(this.editorView.state);\n        if (this.floating) {\n            this.updateScrollCursor();\n        }\n        else {\n            if (this.menu.offsetWidth != this.widthForMaxHeight) {\n                this.widthForMaxHeight = this.menu.offsetWidth;\n                this.maxHeight = 0;\n            }\n            if (this.menu.offsetHeight > this.maxHeight) {\n                this.maxHeight = this.menu.offsetHeight;\n                this.menu.style.minHeight = this.maxHeight + \"px\";\n            }\n        }\n    }\n    updateScrollCursor() {\n        let selection = this.editorView.root.getSelection();\n        if (!selection.focusNode)\n            return;\n        let rects = selection.getRangeAt(0).getClientRects();\n        let selRect = rects[selectionIsInverted(selection) ? 0 : rects.length - 1];\n        if (!selRect)\n            return;\n        let menuRect = this.menu.getBoundingClientRect();\n        if (selRect.top < menuRect.bottom && selRect.bottom > menuRect.top) {\n            let scrollable = findWrappingScrollable(this.wrapper);\n            if (scrollable)\n                scrollable.scrollTop -= (menuRect.bottom - selRect.top);\n        }\n    }\n    updateFloat(scrollAncestor) {\n        let parent = this.wrapper, editorRect = parent.getBoundingClientRect(), top = scrollAncestor ? Math.max(0, scrollAncestor.getBoundingClientRect().top) : 0;\n        if (this.floating) {\n            if (editorRect.top >= top || editorRect.bottom < this.menu.offsetHeight + 10) {\n                this.floating = false;\n                this.menu.style.position = this.menu.style.left = this.menu.style.top = this.menu.style.width = \"\";\n                this.menu.style.display = \"\";\n                this.spacer.parentNode.removeChild(this.spacer);\n                this.spacer = null;\n            }\n            else {\n                let border = (parent.offsetWidth - parent.clientWidth) / 2;\n                this.menu.style.left = (editorRect.left + border) + \"px\";\n                this.menu.style.display = editorRect.top > (this.editorView.dom.ownerDocument.defaultView || window).innerHeight\n                    ? \"none\" : \"\";\n                if (scrollAncestor)\n                    this.menu.style.top = top + \"px\";\n            }\n        }\n        else {\n            if (editorRect.top < top && editorRect.bottom >= this.menu.offsetHeight + 10) {\n                this.floating = true;\n                let menuRect = this.menu.getBoundingClientRect();\n                this.menu.style.left = menuRect.left + \"px\";\n                this.menu.style.width = menuRect.width + \"px\";\n                if (scrollAncestor)\n                    this.menu.style.top = top + \"px\";\n                this.menu.style.position = \"fixed\";\n                this.spacer = crel(\"div\", { class: prefix + \"-spacer\", style: `height: ${menuRect.height}px` });\n                parent.insertBefore(this.spacer, this.menu);\n            }\n        }\n    }\n    destroy() {\n        if (this.wrapper.parentNode)\n            this.wrapper.parentNode.replaceChild(this.editorView.dom, this.wrapper);\n    }\n}\n// Not precise, but close enough\nfunction selectionIsInverted(selection) {\n    if (selection.anchorNode == selection.focusNode)\n        return selection.anchorOffset > selection.focusOffset;\n    return selection.anchorNode.compareDocumentPosition(selection.focusNode) == Node.DOCUMENT_POSITION_FOLLOWING;\n}\nfunction findWrappingScrollable(node) {\n    for (let cur = node.parentNode; cur; cur = cur.parentNode)\n        if (cur.scrollHeight > cur.clientHeight)\n            return cur;\n}\nfunction getAllWrapping(node) {\n    let res = [node.ownerDocument.defaultView || window];\n    for (let cur = node.parentNode; cur; cur = cur.parentNode)\n        res.push(cur);\n    return res;\n}\n\nexport { Dropdown, DropdownSubmenu, MenuItem, blockTypeItem, icons, joinUpItem, liftItem, menuBar, redoItem, renderGrouped, selectParentNodeItem, undoItem, wrapItem };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}